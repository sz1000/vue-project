(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7f1e"],{"+IKh":function(t,e,i){"use strict";var n={props:{title:{type:String,required:!0,placeholder:"请输入一个标题"},placeholder:{type:String,required:!1,default:"请输入内容"},tipText:{type:String,required:!1,default:""},name:{type:String,required:!1,default:""},value:{type:[String,Number],required:!1,default:""},itemKey:{type:String||Number,required:!1,default:null}},computed:{tipMain:function(t){if(this.tipText&&this.tipText.length>0)return this.tipText.split(":")[0]+":"},tipSub:function(){if(this.tipText&&this.tipText.length>0)return this.tipText.split(":")[1]}},methods:{nameChang:function(t){this.$emit("update:value",t)}}},a=(i("Bbut"),i("KHd+")),o=Object(a.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:2}},[i("h3",[t._v(t._s(t.title)+" ")])]),t._v(" "),i("el-col",{attrs:{span:10}},[t._t("default",[i("el-input",{attrs:{value:t.value,placeholder:t.placeholder},on:{change:t.nameChang}})])],2),t._v(" "),i("el-col",{attrs:{span:12}},[i("h4",{staticStyle:{}},[t._v(t._s(t.tipMain))]),t._v(" "),i("p",[t._v(t._s(t.tipSub))])])],1)],1)},[],!1,null,"b3fa24da",null);o.options.__file="index.vue";e.a=o.exports},"0f3L":function(t,e,i){"use strict";i.r(e);var n=i("14Xm"),a=i.n(n),o=i("D3Ub"),s=i.n(o),r=i("+IKh"),u=i("VpLE"),c=i("iYgP"),l=i("Ztr3"),p={components:{Row:r.a,TitleTabs:u.a,AddContainer:c.a},data:function(){return{newFistCategories:!1,addIconColor:"",addIcon:"el-icon-circle-plus",submit1:{orgId:1,id:0,name:"",icoImg:"",level:1,parentId:0},submit2:{orgId:1,value:1,name:"",icoImg:"",level:2,parentId:""},categoriesSelector:[]}},mounted:function(){var t=this;return s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.getFirstList();case 1:case"end":return e.stop()}},e,t)}))()},methods:{addChange:function(){this.addIcon="el-icon-remove"===this.addIcon?"el-icon-circle-plus":"el-icon-remove",this.addIconColor="color:#f56c6c"===this.addIconColor?"":"color:#f56c6c",this.newFistCategories=!this.newFistCategories},getFirstList:function(){var t=this;return s()(a.a.mark(function e(){var i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.getFirstCategories)();case 2:i=e.sent,t.categoriesSelector=[],console.log("TCL: mounted -> firstList",i),i.data.forEach(function(e,i){t.categoriesSelector.push({value:e.id,label:e.name})});case 6:case"end":return e.stop()}},e,t)}))()},submitRequest1:function(){var t=this;return s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TCL: this.submit1",t.submit1),Object(l.postFirstCategories)(t.submit1).catch(function(t){console.error("一级类目修改失败：",t)}),t.getFirstList(),console.log("类目一修改成功"),t.addChange();case 5:case"end":return e.stop()}},e,t)}))()},submitRequest2:function(){var t=this;return s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(l.postSecondCategories)(t.submit2).catch(function(t){console.error("二级类目修改失败：",t)}),t.$message({message:"添加成功",type:"success"}),t.$router.push({path:"/categories/list"});case 3:case"end":return e.stop()}},e,t)}))()},submitRequest:function(){console.log(this.submit1)}}},d=(i("Gl0r"),i("KHd+")),f=Object(d.a)(p,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"content-handle"},[i("el-button",{attrs:{type:"primary"}},[i("i",{staticClass:"el-icon-edit"},[t._v("保 存")])])],1),t._v(" "),i("div",{staticClass:"contant-container"},[i("div",{staticClass:"left-container"},[i("TitleTabs",{attrs:{text:"预览"}}),t._v(" "),i("div",{staticClass:"sub-container"},[i("div",{staticClass:"sub-position"},[i("Row",{attrs:{title:"一级类目"}},[i("div",[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.submit2.parentId,callback:function(e){t.$set(t.submit2,"parentId",e)},expression:"submit2.parentId"}},t._l(t.categoriesSelector,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),i("span",{staticClass:"addRat",on:{click:t.addChange}},[i("i",{class:t.addIcon,style:t.addIconColor})])],1),t._v(" "),i("div",{staticStyle:{width:"100%"}},[t.newFistCategories?i("AddContainer",{attrs:{"submit-data":t.submit1},on:{"update:submitData":function(e){t.submit1=e}}},[i("el-button",{staticClass:"submit",attrs:{type:"primary",size:"small"},on:{click:t.submitRequest1}},[t._v("确认提交")])],1):t._e()],1)]),t._v(" "),i("Row",{attrs:{title:"二级类目"}},[i("div",{staticStyle:{width:"100%"}},[""==t.submit2.parentId?i("p",[t._v("请先选择一级目录")]):t._e(),t._v(" "),""!=t.submit2.parentId?i("AddContainer",{attrs:{"submit-data":t.submit2,"input-text":"二级目录"},on:{"update:submitData":function(e){t.submit2=e}}},[i("el-button",{staticClass:"submit",attrs:{type:"primary",size:"small"},on:{click:t.submitRequest2}},[t._v("确认提交")])],1):t._e()],1)])],1)])],1)])])},[],!1,null,"0c037880",null);f.options.__file="add.vue";e.default=f.exports},18:function(t,e){},19:function(t,e){},20:function(t,e){},21:function(t,e){},"2lAw":function(t,e,i){"use strict";var n=i("vYwx");i.n(n).a},"5x1B":function(t,e,i){"use strict";var n=i("xJXX");i.n(n).a},Bbut:function(t,e,i){"use strict";var n=i("YlTy");i.n(n).a},EnMv:function(t){t.exports={icon:["https://img.kodin.cn/dE3LHF58kk2lfFeRCiloOGbUTlPRJwod.png","https://img.kodin.cn/TrmyAT8V7X2hg23DWMrdnVchUAr5fDQg.png","https://img.kodin.cn/pRS8IiWO7kL8I71XTqrHkFDQXEs1mTiM.png","https://img.kodin.cn/YpmCShnskXNSoSSirSh8DgkYcm3xLRCF.png","https://img.kodin.cn/Sgj4vmrASzojOaFtbm6IM8zqUpOsPQvb.png","https://img.kodin.cn/K09LZ9xUDRsL6qOgExKV5EakDSFodRLS.png","https://img.kodin.cn/mzGfsWutlJirotInTiqHPHEq2CeAbtEi.png","https://img.kodin.cn/kX15ixkf2AjcAaYe2RdcJUeekkcvVUIX.png","https://img.kodin.cn/f6iQxmA2tR6b3N3nPYEtT6qGM1LREZUM.png"]}},Gl0r:function(t,e,i){"use strict";var n=i("Xtwc");i.n(n).a},KTTK:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getQiniuToken=function(t){var e=t?"?key="+t:"";return(0,n.default)({url:"/api/v1/qiniu/token/"+e,method:"get"})},e.getQiniuRefresh=function(t){return(0,n.default)({url:"/api/v1/qiniu/flush",method:"post",data:t})};var n=function(t){return t&&t.__esModule?t:{default:t}}(i("t3Un"))},VpLE:function(t,e,i){"use strict";var n={name:"TitleTabs",props:{text:{type:String,required:!1,default:""}}},a=(i("2lAw"),i("KHd+")),o=Object(a.a)(n,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title-container"},[e("span"),this._v("\n  "+this._s(this.text)+"\n")])},[],!1,null,"329ee37a",null);o.options.__file="index.vue";e.a=o.exports},Xtwc:function(t,e,i){},YlTy:function(t,e,i){},YuTi:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},Ztr3:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCategoriesList=function(){return(0,n.default)({url:"/api/v1/categories/tree",method:"get"})},e.putTargetCategories=function(t,e){return(0,n.default)({url:"/api/v1/categories/"+t,method:"put",data:e})},e.DeleteTargetCategories=function(t){return(0,n.default)({url:"/api/v1/categories/"+t,method:"delete"})},e.getTargetCategories=function(t){return(0,n.default)({url:"/api/v1/categories/"+t,method:"get"})},e.getFirstCategories=function(){return(0,n.default)({url:"/api/v1/categories?level=1",method:"get"})},e.postFirstCategories=function(t){return(0,n.default)({url:"/api/v1/categories",method:"post",data:t})},e.postSecondCategories=function(t){return(0,n.default)({url:"/api/v1/categories",method:"post",data:t})};var n=function(t){return t&&t.__esModule?t:{default:t}}(i("t3Un"))},iYgP:function(t,e,i){"use strict";var n=i("tcnC"),a=i("EnMv"),o={components:{ImgCropper:n.a},props:{submitData:{type:Object,required:!0},inputText:{type:String,required:!1,default:"一级目录"}},data:function(){return{judge:!1,optOnImg:"",icon:[]}},computed:{sefeImg:{get:function(t){var e=this,i=this;return this.icon.forEach(function(t,n){t===e.submitData.icoImg&&(i.judge=!0,i.optOnImg=n)}),99===this.optOnImg?this.submitData.icoImg:""},set:function(t){console.log("TCL: params",t);var e=this.submitData;e.icoImg=t,this.$emit("update:submitData",e)}}},mounted:function(){var t=this;this.icon=a.icon,this.judge=!1,this.icon.forEach(function(e,i){e===t.submitData.icoImg&&(t.optOnImg=i,t.judge=!0)}),!this.judge&&this.submitData.icoImg&&(this.optOnImg=99)},beforeDestroy:function(){this.optOnImg=""},methods:{selectorImg:function(t){this.optOnImg=t,t<99&&(this.submitData.icoImg=this.icon[t],this.$emit("update.submitData",this.submitData))},submitRequest:function(){console.log(this.submitData)}}},s=(i("lALC"),i("KHd+")),r=Object(s.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"select-container"},[i("div",{staticClass:"selectorImg"},[t._l(t.icon,function(e,n){return i("div",{key:n,staticClass:"imgContainer",on:{click:function(){return t.selectorImg(n)}}},[t.optOnImg===n?i("div",{staticClass:"selector"},[i("i",{staticClass:"el-icon-success"})]):t._e(),t._v(" "),i("img",{attrs:{src:e,alt:"",srcset:""}})])}),t._v(" "),i("div",{staticClass:"imgContainer1",on:{click:function(){return t.selectorImg(99)}}},[99===t.optOnImg?i("div",{staticClass:"selector"},[i("i",{staticClass:"el-icon-success"})]):t._e(),t._v(" "),i("ImgCropper",{attrs:{"delete-show":!1,value:t.sefeImg,"fixed-number":[1,1]},on:{"update:value":function(e){t.sefeImg=e}}})],1)],2),t._v(" "),i("div",{staticClass:"name"},[i("h3",[t._v(t._s(t.inputText))]),t._v(" "),i("el-input",{attrs:{placeholder:"请输入"+t.inputText+"名字"},model:{value:t.submitData.name,callback:function(e){t.$set(t.submitData,"name",e)},expression:"submitData.name"}})],1),t._v(" "),t._t("default")],2)},[],!1,null,"e4d0fe86",null);r.options.__file="AddContainer.vue";e.a=r.exports},lALC:function(t,e,i){"use strict";var n=i("wKqx");i.n(n).a},tcnC:function(t,e,i){"use strict";var n=i("14Xm"),a=i.n(n),o=i("D3Ub"),s=i.n(o),r=i("fnnb"),u=i("zqLv"),c=i("KTTK"),l=i("eEY5"),p=i.n(l),d=i("S+eF"),f={components:{VueCropper:r.VueCropper},props:{fixedNumber:{type:Array,required:!1,default:function(){return[750,450]}},width:{type:Number,required:!1,default:90},height:{type:Number,required:!1,default:90},deleteSize:{type:Number,required:!1,default:5},value:{type:String,required:!1,default:""},deleteShow:{type:Boolean,required:!1,default:!0}},data:function(){return{dialogVisible:!1,imgFile:"",file:"默认图片",fileList:[],option:{img:"",size:1,outputType:"jpeg",autoCrop:!0,autoCropWidth:250,autoCropHeight:90,fixed:!0,fixedNumber:[750,450],canMove:!1,centerBox:!0}}},computed:{deleteSizeData:function(){return this.deleteSize+"px"},imgUrl:function(t){return this.image}},methods:{qiniuUp:function(t){var e=this;return s()(a.a.mark(function i(){var n,o,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.getQiniuToken)();case 2:return n=e.sent,o=n.data.token,s=u.upload(t.file,p.a.generate(32)+"."+t.file.name.split(".").pop(),o,{},{}),e.abrupt("return",new d.Promise(function(t,e){s.subscribe({next:function(t){},error:function(t){console.log(t),e(t)},complete:function(e){var i="https://img.kodin.cn//"+e.key;t(i)}})}));case 6:case"end":return e.stop()}},i,e)}))()},handleChange:function(t,e){if("ready"===t.status){var i=t.name.split(".");this.option.outputType=i[i.length-1],this.option.img=window.URL.createObjectURL(t.raw),this.dialogVisible=!0}},cropperImg:function(t){var e=this;return s()(a.a.mark(function t(){var i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e,e.$refs.cropper.getCropBlob(function(){var t=s()(a.a.mark(function t(n){var o,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(o={file:n}).file.name="cropperImg."+n.type.split("/").pop(),t.next=4,e.qiniuUp(o);case 4:s=t.sent,i.dialogVisible=!1,i.$emit("update:value",s),i.$emit("change",s);case 8:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t,e)}))()},deleteImg:function(){this.$emit("update:value","")}}},m=(i("5x1B"),i("KHd+")),g=Object(m.a)(f,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{visible:t.dialogVisible,"close-on-click-modal":!1,"append-to-body":!0,title:"图片裁剪",width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"cropperBox"},[i("VueCropper",{ref:"cropper",attrs:{img:t.option.img,"output-size":t.option.size,"output-type":t.option.outputType,"auto-crop":t.option.autoCrop,fixed:t.option.fixed,"fixed-number":t.fixedNumber,"can-move":t.option.canMove,"auto-crop-width":t.option.autoCropWidth,"auto-crop-height":t.option.autoCropHeight,"center-box":t.option.centerBox}})],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.cropperImg()}}},[t._v("裁 剪")])],1)]),t._v(" "),i("div",{staticClass:"uploadBox",style:{width:t.width+"px",height:t.height+"px"}},[""!=t.value&&t.value&&t.deleteShow?i("div",{staticClass:"delete",on:{click:t.deleteImg}},[i("el-button",{style:{padding:t.deleteSizeData},attrs:{type:"danger",icon:"el-icon-delete",circle:""}})],1):t._e(),t._v(" "),i("el-upload",{staticClass:"avatar-uploader",attrs:{"http-request":t.qiniuUp,"show-file-list":!1,multiple:!1,"on-change":t.handleChange,"auto-upload":!1,"file-list":t.fileList,action:""}},[t.value?i("img",{staticClass:"avatar",attrs:{src:t.value,height:t.height+"px"}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon",style:{width:t.width+"px",height:t.height+"px","line-height":t.height+"px"}})])],1)],1)},[],!1,null,"c348c6b4",null);g.options.__file="index.vue";e.a=g.exports},vYwx:function(t,e,i){},wKqx:function(t,e,i){},xJXX:function(t,e,i){}}]);