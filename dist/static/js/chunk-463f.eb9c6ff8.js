(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-463f"],{"/f1G":function(t,e,i){t.exports={default:i("nhzr"),__esModule:!0}},18:function(t,e){},19:function(t,e){},20:function(t,e){},21:function(t,e){},"5x1B":function(t,e,i){"use strict";var n=i("xJXX");i.n(n).a},"7F0c":function(t,e,i){"use strict";var n=i("8sIt");i.n(n).a},"8sIt":function(t,e,i){},E8gZ:function(t,e,i){var n=i("jmDH"),a=i("w6GO"),o=i("NsO/"),s=i("NV0k").f;t.exports=function(t){return function(e){for(var i,r=o(e),c=a(r),u=c.length,l=0,d=[];u>l;)i=c[l++],n&&!s.call(r,i)||d.push(t?[i,r[i]]:r[i]);return d}}},EnMv:function(t){t.exports={icon:["https://img.kodin.cn/dE3LHF58kk2lfFeRCiloOGbUTlPRJwod.png","https://img.kodin.cn/TrmyAT8V7X2hg23DWMrdnVchUAr5fDQg.png","https://img.kodin.cn/pRS8IiWO7kL8I71XTqrHkFDQXEs1mTiM.png","https://img.kodin.cn/YpmCShnskXNSoSSirSh8DgkYcm3xLRCF.png","https://img.kodin.cn/Sgj4vmrASzojOaFtbm6IM8zqUpOsPQvb.png","https://img.kodin.cn/K09LZ9xUDRsL6qOgExKV5EakDSFodRLS.png","https://img.kodin.cn/mzGfsWutlJirotInTiqHPHEq2CeAbtEi.png","https://img.kodin.cn/kX15ixkf2AjcAaYe2RdcJUeekkcvVUIX.png","https://img.kodin.cn/f6iQxmA2tR6b3N3nPYEtT6qGM1LREZUM.png"]}},KTTK:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getQiniuToken=function(t){var e=t?"?key="+t:"";return(0,n.default)({url:"/api/v1/qiniu/token/"+e,method:"get"})},e.getQiniuRefresh=function(t){return(0,n.default)({url:"/api/v1/qiniu/flush",method:"post",data:t})};var n=function(t){return t&&t.__esModule?t:{default:t}}(i("t3Un"))},YuTi:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},Ztr3:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCategoriesList=function(){return(0,n.default)({url:"/api/v1/categories/tree",method:"get"})},e.putTargetCategories=function(t,e){return(0,n.default)({url:"/api/v1/categories/"+t,method:"put",data:e})},e.DeleteTargetCategories=function(t){return(0,n.default)({url:"/api/v1/categories/"+t,method:"delete"})},e.getTargetCategories=function(t){return(0,n.default)({url:"/api/v1/categories/"+t,method:"get"})},e.getFirstCategories=function(){return(0,n.default)({url:"/api/v1/categories?level=1",method:"get"})},e.postFirstCategories=function(t){return(0,n.default)({url:"/api/v1/categories",method:"post",data:t})},e.postSecondCategories=function(t){return(0,n.default)({url:"/api/v1/categories",method:"post",data:t})};var n=function(t){return t&&t.__esModule?t:{default:t}}(i("t3Un"))},fW1p:function(t,e,i){var n=i("Y7ZC"),a=i("E8gZ")(!1);n(n.S,"Object",{values:function(t){return a(t)}})},iYgP:function(t,e,i){"use strict";var n=i("tcnC"),a=i("EnMv"),o={components:{ImgCropper:n.a},props:{submitData:{type:Object,required:!0},inputText:{type:String,required:!1,default:"一级目录"}},data:function(){return{judge:!1,optOnImg:"",icon:[]}},computed:{sefeImg:{get:function(t){var e=this,i=this;return this.icon.forEach(function(t,n){t===e.submitData.icoImg&&(i.judge=!0,i.optOnImg=n)}),99===this.optOnImg?this.submitData.icoImg:""},set:function(t){console.log("TCL: params",t);var e=this.submitData;e.icoImg=t,this.$emit("update:submitData",e)}}},mounted:function(){var t=this;this.icon=a.icon,this.judge=!1,this.icon.forEach(function(e,i){e===t.submitData.icoImg&&(t.optOnImg=i,t.judge=!0)}),!this.judge&&this.submitData.icoImg&&(this.optOnImg=99)},beforeDestroy:function(){this.optOnImg=""},methods:{selectorImg:function(t){this.optOnImg=t,t<99&&(this.submitData.icoImg=this.icon[t],this.$emit("update.submitData",this.submitData))},submitRequest:function(){console.log(this.submitData)}}},s=(i("lALC"),i("KHd+")),r=Object(s.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"select-container"},[i("div",{staticClass:"selectorImg"},[t._l(t.icon,function(e,n){return i("div",{key:n,staticClass:"imgContainer",on:{click:function(){return t.selectorImg(n)}}},[t.optOnImg===n?i("div",{staticClass:"selector"},[i("i",{staticClass:"el-icon-success"})]):t._e(),t._v(" "),i("img",{attrs:{src:e,alt:"",srcset:""}})])}),t._v(" "),i("div",{staticClass:"imgContainer1",on:{click:function(){return t.selectorImg(99)}}},[99===t.optOnImg?i("div",{staticClass:"selector"},[i("i",{staticClass:"el-icon-success"})]):t._e(),t._v(" "),i("ImgCropper",{attrs:{"delete-show":!1,value:t.sefeImg,"fixed-number":[1,1]},on:{"update:value":function(e){t.sefeImg=e}}})],1)],2),t._v(" "),i("div",{staticClass:"name"},[i("h3",[t._v(t._s(t.inputText))]),t._v(" "),i("el-input",{attrs:{placeholder:"请输入"+t.inputText+"名字"},model:{value:t.submitData.name,callback:function(e){t.$set(t.submitData,"name",e)},expression:"submitData.name"}})],1),t._v(" "),t._t("default")],2)},[],!1,null,"e4d0fe86",null);r.options.__file="AddContainer.vue";e.a=r.exports},lALC:function(t,e,i){"use strict";var n=i("wKqx");i.n(n).a},nhzr:function(t,e,i){i("fW1p"),t.exports=i("WEpk").Object.values},rSqH:function(t,e,i){"use strict";i.r(e);var n=i("/f1G"),a=i.n(n),o=i("GQeE"),s=i.n(o),r=i("EJiy"),c=i.n(r),u=i("14Xm"),l=i.n(u),d=i("D3Ub"),p=i.n(d),g=i("Ztr3"),f={components:{AddContainer:i("iYgP").a},data:function(){return{inputText:"二级目录",addCategories:!1,deleteId:0,deleteVisible:!1,dialogVisible:!1,options:{orgId:1,id:0,name:"",icoImg:"",level:2,parentId:0},tableData:[],currentPage:0,total:100,pageCount:10}},mounted:function(){var t=this;return p()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.getList();case 1:case"end":return e.stop()}},e,t)}))()},methods:{cancel:function(){this.options={orgId:1,id:0,name:"",ico_img:"",level:2,parent_id:0},this.deleteVisible=!1},firstTagClose:function(t){var e=this;if(0!==t.children.length)this.$message({message:"此一级目录下还存在二级目录，如要删除，请先删除二级目录",type:"warning"});else if(0===t.children.length){var i=this;Object(g.DeleteTargetCategories)(t.id).then(function(){var t=p()(l.a.mark(function t(n){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.getList();case 2:i.$message({message:"删除成功",type:"success"});case 3:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}())}},getList:function(t){var e=this;return p()(l.a.mark(function t(){var i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.getCategoriesList)();case 2:i=t.sent,e.tableData=i.data;case 4:case"end":return t.stop()}},t,e)}))()},editSecondCategories:function(t){var e=this;return p()(l.a.mark(function i(){var n;return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(g.getTargetCategories)(t);case 2:n=i.sent,e.options=e.undelinToHump(n.data),e.dialogVisible=!0;case 5:case"end":return i.stop()}},i,e)}))()},addSecond:function(t){console.log("TCL: addSecond -> parentId",t),this.options={orgId:1,id:0,name:"",icoImg:"",level:2,parentId:t},this.inputText="二级目录",this.addCategories=!0,this.dialogVisible=!0},addFirst:function(){this.options={orgId:1,id:0,name:"",icoImg:"",level:1,parentId:0},this.inputText="一级目录",this.addCategories=!0,this.dialogVisible=!0},deleteCat:function(){var t=this;return p()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.DeleteTargetCategories)(t.deleteId);case 2:t.getList(),t.$message({message:"删除成功",type:"success"}),t.options={orgId:1,id:0,name:"",icoImg:"",level:1,parentId:0},t.deleteVisible=!1;case 6:case"end":return e.stop()}},e,t)}))()},tagHandleClose:function(t){var e=this;return p()(l.a.mark(function i(){return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:e.deleteVisible=!0,e.deleteId=t;case 2:case"end":return i.stop()}},i,e)}))()},tagHandleEdit:function(t,e){var i=this;return p()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&(i.options={orgId:t.org_id,id:t.id,name:t.name,icoImg:t.ico_img,level:t.level,parentId:t.parent_id}),i.dialogVisible=!0;case 2:case"end":return e.stop()}},e,i)}))()},submitOptions:function(){var t=this;return p()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.options.name&&t.options.name){e.next=3;break}return t.$message({message:"请输入类目名",type:"warning"}),e.abrupt("return");case 3:if(""!==t.options.icoImg&&t.options.icoImg){e.next=6;break}return t.$message({message:"请选择图标",type:"warning"}),e.abrupt("return");case 6:if(!t.addCategories){e.next=12;break}return e.next=9,Object(g.postSecondCategories)(t.options);case 9:t.$message({message:"添加类目成功",type:"success"}),e.next=15;break;case 12:return e.next=14,Object(g.putTargetCategories)(t.options.id,t.options);case 14:t.$message({message:"修改成功",type:"success"});case 15:t.getList(),t.addCategories=!1,t.dialogVisible=!1,t.options={orgId:1,id:0,name:"",icoImg:"",level:2,parentId:0};case 19:case"end":return e.stop()}},e,t)}))()},handleCancel:function(){this.dialogVisible=!1},undelinToHump:function(t){if(console.log(void 0===t?"undefined":c()(t)),"object"===(void 0===t?"undefined":c()(t))){var e=s()(t),i=a()(t),n=[];e.forEach(function(t){var e=t.replace(/\_(\w)/g,function(t,e){return e.toUpperCase()});n.push(e)});var o={};return i.forEach(function(t,e){o[n[e]]=t}),o}console.error("undelinToHump:只接受对象")}}},m=(i("7F0c"),i("KHd+")),h=Object(m.a)(f,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"categories"},[i("div",{staticClass:"tabelContainerStyle"},[i("div",{staticClass:"contant-container list-container"},[i("div",{staticClass:"content-handle"},[i("el-button",{attrs:{type:"primary"},on:{click:t.addFirst}},[i("i",{staticClass:"el-icon-edit"},[t._v("添加一级类目")])])],1),t._v(" "),i("div",{staticClass:"tableContainer"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-style":{background:"rgba(241,243,244,1)",padding:"8px 0"},"header-row-class-name":"headerStyle","header-cell-class-name":"headerCell","cell-class-name":"rowStyle"}},[i("el-table-column",{attrs:{align:"center",prop:"id",label:"编号",width:"120"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",prop:"name",label:"一级类目",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"iconImg-container"},[i("div",{staticClass:"iconImg"},[i("div",{staticClass:"closeIcon",on:{click:function(i){i.stopPropagation(),t.firstTagClose(e.row)}}},[i("i",{staticClass:"el-icon-circle-close"})]),t._v(" "),i("div",{on:{click:function(i){t.editSecondCategories(e.row.id)}}},[i("img",{attrs:{src:e.row.ico_img}}),t._v(" "),i("p",[t._v("\n                      "+t._s(e.row.name)+"\n                    ")])])])])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"二级类目"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"tagContainer"},[t._l(e.row.children,function(e,n){return i("div",{key:n,staticStyle:{margin:"10px 0"}},[i("div",{staticClass:"iconImg"},[i("div",{staticClass:"closeIcon",on:{click:function(i){i.stopPropagation(),t.tagHandleClose(e.id)}}},[i("i",{staticClass:"el-icon-circle-close"})]),t._v(" "),i("img",{attrs:{src:e.ico_img},on:{click:function(i){t.tagHandleEdit(e)}}}),t._v(" "),i("p",{on:{click:function(i){t.tagHandleEdit(e)}}},[t._v(t._s(e.name))])])])}),t._v(" "),i("div",{staticClass:"addCategories",on:{click:function(i){t.addSecond(e.row.id)}}},[i("i",{staticClass:"el-icon-circle-plus"})])],2)]}}])})],1)],1)]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible,title:"提示",width:"600px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[t.dialogVisible?i("AddContainer",{attrs:{"submit-data":t.options,"input-text":t.inputText},on:{"update:submitData":function(e){t.options=e}}}):t._e(),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.handleCancel}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.submitOptions}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{visible:t.deleteVisible,title:"警告!!!",width:"30%"},on:{"update:visible":function(e){t.deleteVisible=e}}},[i("span",[t._v("是否确认删除,删除后该类目下的商品也将删除!!!")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"danger"},on:{click:t.deleteCat}},[t._v("确 定")])],1)])],1)])},[],!1,null,null,null);h.options.__file="index.vue";e.default=h.exports},tcnC:function(t,e,i){"use strict";var n=i("14Xm"),a=i.n(n),o=i("D3Ub"),s=i.n(o),r=i("fnnb"),c=i("zqLv"),u=i("KTTK"),l=i("eEY5"),d=i.n(l),p=i("S+eF"),g={components:{VueCropper:r.VueCropper},props:{fixedNumber:{type:Array,required:!1,default:function(){return[750,450]}},width:{type:Number,required:!1,default:90},height:{type:Number,required:!1,default:90},deleteSize:{type:Number,required:!1,default:5},value:{type:String,required:!1,default:""},deleteShow:{type:Boolean,required:!1,default:!0}},data:function(){return{dialogVisible:!1,imgFile:"",file:"默认图片",fileList:[],option:{img:"",size:1,outputType:"jpeg",autoCrop:!0,autoCropWidth:250,autoCropHeight:90,fixed:!0,fixedNumber:[750,450],canMove:!1,centerBox:!0}}},computed:{deleteSizeData:function(){return this.deleteSize+"px"},imgUrl:function(t){return this.image}},methods:{qiniuUp:function(t){var e=this;return s()(a.a.mark(function i(){var n,o,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.getQiniuToken)();case 2:return n=e.sent,o=n.data.token,s=c.upload(t.file,d.a.generate(32)+"."+t.file.name.split(".").pop(),o,{},{}),e.abrupt("return",new p.Promise(function(t,e){s.subscribe({next:function(t){},error:function(t){console.log(t),e(t)},complete:function(e){var i="https://img.kodin.cn//"+e.key;t(i)}})}));case 6:case"end":return e.stop()}},i,e)}))()},handleChange:function(t,e){if("ready"===t.status){var i=t.name.split(".");this.option.outputType=i[i.length-1],this.option.img=window.URL.createObjectURL(t.raw),this.dialogVisible=!0}},cropperImg:function(t){var e=this;return s()(a.a.mark(function t(){var i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e,e.$refs.cropper.getCropBlob(function(){var t=s()(a.a.mark(function t(n){var o,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(o={file:n}).file.name="cropperImg."+n.type.split("/").pop(),t.next=4,e.qiniuUp(o);case 4:s=t.sent,i.dialogVisible=!1,i.$emit("update:value",s),i.$emit("change",s);case 8:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t,e)}))()},deleteImg:function(){this.$emit("update:value","")}}},f=(i("5x1B"),i("KHd+")),m=Object(f.a)(g,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{visible:t.dialogVisible,"close-on-click-modal":!1,"append-to-body":!0,title:"图片裁剪",width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"cropperBox"},[i("VueCropper",{ref:"cropper",attrs:{img:t.option.img,"output-size":t.option.size,"output-type":t.option.outputType,"auto-crop":t.option.autoCrop,fixed:t.option.fixed,"fixed-number":t.fixedNumber,"can-move":t.option.canMove,"auto-crop-width":t.option.autoCropWidth,"auto-crop-height":t.option.autoCropHeight,"center-box":t.option.centerBox}})],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.cropperImg()}}},[t._v("裁 剪")])],1)]),t._v(" "),i("div",{staticClass:"uploadBox",style:{width:t.width+"px",height:t.height+"px"}},[""!=t.value&&t.value&&t.deleteShow?i("div",{staticClass:"delete",on:{click:t.deleteImg}},[i("el-button",{style:{padding:t.deleteSizeData},attrs:{type:"danger",icon:"el-icon-delete",circle:""}})],1):t._e(),t._v(" "),i("el-upload",{staticClass:"avatar-uploader",attrs:{"http-request":t.qiniuUp,"show-file-list":!1,multiple:!1,"on-change":t.handleChange,"auto-upload":!1,"file-list":t.fileList,action:""}},[t.value?i("img",{staticClass:"avatar",attrs:{src:t.value,height:t.height+"px"}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon",style:{width:t.width+"px",height:t.height+"px","line-height":t.height+"px"}})])],1)],1)},[],!1,null,"c348c6b4",null);m.options.__file="index.vue";e.a=m.exports},wKqx:function(t,e,i){},xJXX:function(t,e,i){}}]);