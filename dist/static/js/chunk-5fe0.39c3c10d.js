(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5fe0"],{"/f1G":function(t,e,a){t.exports={default:a("nhzr"),__esModule:!0}},"89ou":function(t,e,a){"use strict";var s=a("ZCow");a.n(s).a},CGHh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r(a("P2sY"));e.getOrderList=function(t){console.log("TCL: getOrderList -> params123123123__++",t);var e=(0,s.default)({},t,{type:0},{withUser:1});return console.log("TCL: getOrderList -> params",t),(0,l.default)({url:"api/v1/order/"+(0,i.objToParams)(e),method:"get"})},e.getVerifivationOrder=function(t){return(0,l.default)({url:"api/v1/order/key/"+t,method:"get"})},e.putConfirmOrder=function(t){return(0,l.default)({url:"api/v1/order/confirm/"+t,method:"put"})},e.getClientOrder=function(t){return(0,l.default)({url:"api/v1/order/"+(0,i.objToParams)(t),method:"get"})};var l=r(a("t3Un")),i=a("z0WU");function r(t){return t&&t.__esModule?t:{default:t}}},E8gZ:function(t,e,a){var s=a("jmDH"),l=a("w6GO"),i=a("NsO/"),r=a("NV0k").f;t.exports=function(t){return function(e){for(var a,o=i(e),n=l(o),c=n.length,u=0,d=[];c>u;)a=n[u++],s&&!r.call(o,a)||d.push(t?[a,o[a]]:o[a]);return d}}},GYiB:function(t,e,a){"use strict";var s=a("hlMO");a.n(s).a},XpFp:function(t,e,a){"use strict";a.r(e);var s={props:{title:{type:String,required:!1,default:""}}},l=(a("GYiB"),a("KHd+")),i=Object(l.a)(s,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title-container"},[e("div",{staticClass:"left"},[e("span",{staticClass:"icon"}),this._v(" "),e("div",[this._v(this._s(this.title))])]),this._v(" "),e("div",{staticClass:"right"},[this._t("default")],2)])},[],!1,null,"035531e2",null);i.options.__file="title.vue";var r=i.exports,o=a("s58v"),n=a("CGHh"),c={filters:{consumeStatus:function(t){switch(t){case 0:return"意向客户";case 1:return"成单客户-"}},callbackWay:function(t){switch(t){case 1:return"电话跟进";case 2:return"平台跟进";case 3:return"微信跟进";case 4:return"短信跟进";case 5:return"面谈跟进"}}},components:{Title:r},data:function(){return{currentPage:1,pageTotal:10,dialogVisible:!1,consumeOrderList:[],detailData:{},followupData:[],followupSubmit:{user_id:"",servicer:"",content:""}}},mounted:function(){this.$route.query.id&&(this.initData(this.$route.query.id),this.followupSubmit.user_id=this.$route.query.id,this.id=this.$route.query.id)},methods:{initData:function(t){var e=this;Object(o.getClient)(t).then(function(t){console.log("TCL: initData detailData-> res",t),e.detailData=t.data}).catch(function(t){console.log("TCL: initData -> err",t)}),Object(n.getClientOrder)({customer_id:t,with_offline:1,type:0,page:this.currentPage}).then(function(t){console.log("TCL: initData -> res",t),e.consumeOrderList=t.data,e.pageTotal=t.page.total}).catch(function(t){console.log("TCL: initData -> err",t)}),Object(o.getClientFollowup)({user_id:t}).then(function(t){console.log("TCL: 获取跟进记录",t),e.followupData=t.data}).catch(function(t){console.log("TCL: err",t)})},handleChangeCurrent:function(t){this.currentPage=t,this.initData(this.id)},handleToDetail:function(){console.log("晚上信息"),this.$router.push({path:"/client/add",query:{id:this.$route.query.id}})},handleToAddCousume:function(){this.$router.push({path:"/client/addConsume",query:{id:this.$route.query.id}})},handleFollowupSubmit:function(){var t=this;this.followupSubmit.content?this.followupSubmit.servicer?Object(o.postlientFollowup)(this.followupSubmit).then(function(e){t.initData(t.id),t.dialogVisible=!1,t.followupSubmit.servicer="",t.followupSubmit.content=""}).catch(function(t){console.log("TCL: handleFollowupSubmit -> err",t)}):this.$message.error("请输入客户姓名"):this.$message.error("请输入内容")},handleAddFollowUp:function(){this.$router.push({path:"/client/addVisit",query:{id:this.id}})}}},u=(a("89ou"),Object(l.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("section",{staticClass:"content"},[a("article",{staticClass:"info-container"},[a("Title",{attrs:{title:"客户信息"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleToDetail}},[t._v("完善信息")])],1),t._v(" "),a("el-row",[a("div",{staticClass:"details"},[a("el-col",{staticClass:"left",attrs:{span:6}},[t._v("姓名:")]),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:6}},[t._v(t._s(t.detailData.name))])],1),t._v(" "),t.detailData.gender?a("div",{staticClass:"details"},[a("el-col",{staticClass:"left",attrs:{span:6}},[t._v("性别:")]),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:6}},[t._v(t._s(t._f("gender")(t.detailData.gender)))])],1):t._e(),t._v(" "),t.detailData.profession?a("div",{staticClass:"details"},[a("el-col",{staticClass:"left",attrs:{span:6}},[t._v("职业:")]),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:6}},[t._v(t._s(t.detailData.profession))])],1):t._e(),t._v(" "),t.detailData.birthday?a("div",{staticClass:"details"},[a("el-col",{staticClass:"left",attrs:{span:6}},[t._v("生日:")]),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:6}},[t._v(t._s(t.detailData.birthday.split(" ")[0]))])],1):t._e(),t._v(" "),t.detailData.age?a("div",{staticClass:"details"},[a("el-col",{staticClass:"left",attrs:{span:6}},[t._v("年龄:")]),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:6}},[t._v(t._s(t.detailData.age))])],1):t._e(),t._v(" "),a("div",{staticClass:"details"},[a("el-col",{staticClass:"left",attrs:{span:6}},[t._v("手机号码:")]),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:6}},[t._v(t._s(t.detailData.tel))])],1),t._v(" "),t.detailData.wxid?a("div",{staticClass:"details"},[a("el-col",{staticClass:"left",attrs:{span:6}},[t._v("微信号:")]),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:6}},[t._v(t._s(t.detailData.wxid))])],1):t._e(),t._v(" "),a("div",{staticClass:"details"},[a("el-col",{staticClass:"left",attrs:{span:6}},[t._v("所属销售:")]),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:6}},[t._v(t._s(t.detailData.saler||"暂无"))])],1),t._v(" "),a("div",{staticClass:"details"},[a("el-col",{staticClass:"left",attrs:{span:6}},[t._v("来源渠道:")]),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:6}},[t._v(t._s(t.detailData.source||"暂无"))])],1),t._v(" "),a("div",{staticClass:"details"},[a("el-col",{staticClass:"left",attrs:{span:6}},[t._v("客户类别:")]),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:6}},[t._v(t._s(t._f("consumeStatus")(t.detailData.consume_status)))])],1),t._v(" "),a("div",{staticClass:"details"},[a("el-col",{staticClass:"left",attrs:{span:6}},[t._v("消费金额:")]),t._v(" "),a("el-col",{staticClass:"right",staticStyle:{color:"#FF3A26"},attrs:{span:6}},[t._v("¥"+t._s(t.detailData.consumer/100))])],1),t._v(" "),a("div",{staticClass:"details"},[a("el-col",{staticClass:"left",attrs:{span:6}},[t._v("注册时间:")]),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:6}},[t._v(t._s(t.detailData.created_at))])],1)]),t._v(" "),t.detailData.province?a("el-row",[a("div",{staticClass:"details"},[a("el-col",{staticClass:"left",attrs:{span:6}},[t._v("地区:")]),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:6}},[t._v(t._s(t.detailData.province)+"/"+t._s(t.detailData.city)+"/"+t._s(t.detailData.area))])],1)]):t._e(),t._v(" "),t.detailData.address?a("el-row",[a("div",{staticClass:"details"},[a("el-col",{staticClass:"left",attrs:{span:6}},[t._v("地址:")]),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:17}},[t._v(t._s(t.detailData.address))])],1)]):t._e(),t._v(" "),t.detailData.remark?a("el-row",[a("div",{staticClass:"details"},[a("el-col",{staticClass:"left",attrs:{span:6}},[t._v("备注:")]),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:6}},[t._v(t._s(t.detailData.remark))])],1)]):t._e()],1),t._v(" "),a("article",{staticClass:"info-container"},[a("Title",{attrs:{title:"消费记录"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleToAddCousume}},[t._v("新增消费记录")])],1),t._v(" "),a("el-table",{attrs:{data:t.consumeOrderList,"header-cell-class-name":"rowS"}},[a("el-table-column",{attrs:{label:"订单ID",prop:"order_num"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品名称",prop:"product_name"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品价格"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.total_price/100))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"小程序支付"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.pay_price/100))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"线下支付"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.odd_price/100))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"订单状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t._f("orderStatus")(e.row.status)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"下单时间",prop:"created_at"}})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{total:t.pageTotal,small:"",background:"",layout:"prev, pager, next"},on:{"current-change":t.handleChangeCurrent}})],1)],1),t._v(" "),a("article",{staticClass:"info-container"},[a("Title",{attrs:{title:"跟进记录"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleAddFollowUp}},[t._v("新增跟进")])],1),t._v(" "),0!=t.followupData.length?a("el-timeline",[t._l(t.followupData,function(e,s){return a("el-timeline-item",{key:s,attrs:{"hide-timestamp":!0,color:"#1890ff",size:"normal",timestamp:"2018-04-03 20:46"}},[a("article",{staticClass:"followup-item"},[a("p",{staticClass:"followup-item-created"},[t._v(t._s(e.created_at))]),t._v(" "),a("div",{staticClass:"followup-item-box"},[a("span",[t._v("服务客服:"+t._s(e.servicer))]),t._v(" "),a("span",[t._v("跟进方式:"+t._s(t._f("callbackWay")(e.callback_way)))])]),t._v(" "),a("p",[t._v("推荐项目:"+t._s(e.product))]),t._v(" "),a("div",[a("p",[t._v("下次回访时间:"+t._s(e.next_time))])]),t._v(" "),a("div",{staticClass:"content-container"},[a("p",[t._v("跟进记录")]),t._v(" "),a("div",[t._v(t._s(e.content))])]),t._v(" "),e.remark?a("div",{staticClass:"content-container"},[a("p",[t._v("其他备注")]),t._v(" "),a("div",[t._v(t._s(e.remark))])]):t._e()])])}),t._v(" "),a("el-timeline-item",{attrs:{"hide-timestamp":!0,size:"normal"}})],2):t._e(),t._v(" "),0==t.followupData.length?a("div",{staticClass:"notAvailable"},[t._v("\n        暂无数据\n      ")]):t._e()],1)]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible,title:"编辑跟进记录",width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入内容..."},model:{value:t.followupSubmit.content,callback:function(e){t.$set(t.followupSubmit,"content",e)},expression:"followupSubmit.content"}}),t._v(" "),a("el-row",{staticStyle:{margin:"10px 0"},attrs:{type:"flex",align:"middle"}},[a("el-col",{attrs:{span:6}},[t._v("服务客服:")]),t._v(" "),a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{placeholder:"请输入客服姓名"},model:{value:t.followupSubmit.servicer,callback:function(e){t.$set(t.followupSubmit,"servicer",e)},expression:"followupSubmit.servicer"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleFollowupSubmit}},[t._v("确 定")])],1)],1)],1)},[],!1,null,"20fd1df3",null));u.options.__file="detail.vue";e.default=u.exports},ZCow:function(t,e,a){},fW1p:function(t,e,a){var s=a("Y7ZC"),l=a("E8gZ")(!1);s(s.S,"Object",{values:function(t){return l(t)}})},"gDS+":function(t,e,a){t.exports={default:a("oh+g"),__esModule:!0}},hlMO:function(t,e,a){},nhzr:function(t,e,a){a("fW1p"),t.exports=a("WEpk").Object.values},"oh+g":function(t,e,a){var s=a("WEpk"),l=s.JSON||(s.JSON={stringify:JSON.stringify});t.exports=function(t){return l.stringify.apply(l,arguments)}},s58v:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getClientList=function(t){var e=(0,l.objToParams)(t);return(0,s.default)({url:"/api/v1/user/list/"+e,method:"get"})},e.getClient=function(t){return(0,s.default)({url:"/api/v1/user/"+t,method:"get"})},e.postClient=function(t,e,a){return(0,s.default)({url:"/api/v1/user/"+(a||""),method:e||"post",data:t})},e.postSource=function(t){return(0,s.default)({url:"/api/v1/user/source",method:"POST",data:t})},e.getSourceList=function(){return(0,s.default)({url:"/api/v1/user/source",method:"get"})},e.delSource=function(t){return(0,s.default)({url:"/api/v1/user/source/"+t,method:"DELETE"})},e.postOfflineOrder=function(t){return(0,s.default)({url:"/api/v1/order/offline",method:"post",data:t})},e.getClientFollowup=function(t){return(0,s.default)({url:"api/v1/followup/"+(0,l.objToParams)(t),method:"get"})},e.postlientFollowup=function(t){return(0,s.default)({url:"api/v1/followup",method:"post",data:t})};var s=function(t){return t&&t.__esModule?t:{default:t}}(a("t3Un")),l=a("z0WU")},z0WU:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o(a("gDS+")),l=o(a("/f1G")),i=o(a("GQeE")),r=o(a("EJiy"));function o(t){return t&&t.__esModule?t:{default:t}}e.undelinToHump=function(t){if("object"===(void 0===t?"undefined":(0,r.default)(t))){var e=(0,i.default)(t),a=(0,l.default)(t),s=[];e.forEach(function(t){var e=t.replace(/\_(\w)/g,function(t,e){return e.toUpperCase()});s.push(e)});var o={};return a.forEach(function(t,e){o[s[e]]=t}),o}console.error("undelinToHump:只接受对象")},e.objToParams=function(t){if(!t||"{}"===(0,s.default)(t))return"";var e=(0,i.default)(t),a=(0,l.default)(t),r="?";return e.forEach(function(t,s){r+=t+"="+a[s]+(e.length-1===s?"":"&")}),r}}}]);