(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-20ac"],{18:function(t,e){},19:function(t,e){},"1YHe":function(t,e,i){},20:function(t,e){},21:function(t,e){},"2lAw":function(t,e,i){"use strict";var n=i("vYwx");i.n(n).a},"5x1B":function(t,e,i){"use strict";var n=i("xJXX");i.n(n).a},"6htJ":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"]},"9fVM":function(t,e,i){"use strict";var n=i("1YHe");i.n(n).a},"9re7":function(t,e,i){},KTTK:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getQiniuToken=function(t){var e=t?"?key="+t:"";return(0,n.default)({url:"/api/v1/qiniu/token/"+e,method:"get"})},e.getQiniuRefresh=function(t){return(0,n.default)({url:"/api/v1/qiniu/flush",method:"post",data:t})};var n=function(t){return t&&t.__esModule?t:{default:t}}(i("t3Un"))},MbX3:function(t,e,i){},"Ow/w":function(t,e,i){"use strict";i.r(e);var n=i("14Xm"),a=i.n(n),o=i("D3Ub"),s=i.n(o),r=i("VpLE"),l=i("tcnC"),c=i("glbJ"),u=i("cpj6"),d=i("xtIY"),p=i("rjhV"),f={components:{TitleTabs:r.a,ImgCropper:l.a,Tinymce:c.a,Preview:u.a,PhoneTitle:d.a},data:function(){return{rules:{slideshowArr:[{required:!0,message:"至少需要上传一张照片",validator:function(t,e,i){var n=0;e.forEach(function(t,e){t&&(n+=1)}),console.log(n),0===n?i(!1):i()},trigger:"blur"}],content:[{required:!0,message:"请输入简介",trigger:"blur"}]},submitData:{slideshowArr:[null,null,null,null],content:""}}},mounted:function(){var t=this;return s()(a.a.mark(function e(){var i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.getIntro)();case 2:i=e.sent,console.log("TCL: mounted -> data",i),null!==i.data&&(t.submitData=i.data);case 5:case"end":return e.stop()}},e,t)}))()},methods:{submitHendle:function(t){console.log("提交");var e=this;this.$refs[t].validate(function(t){if(console.log("TCL: submitHendle -> valid",t),!t)return console.log("error submit!!"),!1;Object(p.postIntro)(e.submitData).then(function(t){e.$message({type:"success",message:"提交成功！请前往小程序查看"})}).catch(function(t){console.error(t),e.$message.error("出错了")})})}}},h=(i("gQ+T"),i("KHd+")),m=Object(h.a)(f,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"margin-top":"30px"}},[i("div",{staticClass:"contant-container"},[i("div",{staticClass:"left-container"},[i("TitleTabs",{attrs:{text:"预览"}}),t._v(" "),i("div",{staticClass:"sub-container"},[i("Preview",{staticClass:"preview"},[i("div",{staticClass:"topBar"},[i("div",{staticClass:"topBar-hover"},[t._v("简介")]),t._v(" "),i("div",[t._v("医生")]),t._v(" "),i("div",[t._v("案例")])]),t._v(" "),i("el-carousel",{staticClass:"slideshowContainer",attrs:{"indicator-position":"none",arrow:"hover",height:"223px"}},t._l(t.submitData.slideshowArr,function(e,n){return i("div",{key:n},[e?i("el-carousel-item",[i("img",{attrs:{src:e,alt:"",srcset:""}})]):t._e()],1)})),t._v(" "),i("div",[i("PhoneTitle",{attrs:{"title-name":"医院简介"}},[i("div",{staticClass:"tinymceStyle",domProps:{innerHTML:t._s(t.submitData.content)}})])],1)],1)],1)],1),t._v(" "),i("div",{staticClass:"right-container"},[i("TitleTabs",{attrs:{text:"编辑"}}),t._v(" "),i("div",{staticClass:"sub-container"},[i("el-form",{ref:"submitData",staticClass:"edit-container",attrs:{model:t.submitData,rules:t.rules,"label-width":"96px","label-position":"left"}},[i("el-form-item",{attrs:{prop:"slideshowArr",label:"轮博图"}},[i("div",{staticClass:"slideshow"},t._l(t.submitData.slideshowArr,function(e,n){return i("ImgCropper",{key:n,staticClass:"slideshow-item",attrs:{"fixed-number":[750,670],value:t.submitData.slideshowArr[n]},on:{"update:value":function(e){t.$set(t.submitData.slideshowArr,n,e)}}})})),t._v(" "),i("div",{staticClass:"tip"},[i("p",{staticClass:"tip-title"},[t._v("提示:")]),t._v(" "),i("div",{staticClass:"tip-content"},[i("p",[t._v("1. 至少上传一张图片")]),t._v(" "),i("p",[t._v("2. 图片文件大小不能超过2M")]),t._v(" "),i("p",[t._v("3.支持JPG，PNG 格式")]),t._v(" "),i("p",[t._v("4.建议尺寸750*670像素，不同像素在添加过程会提供等比例图片裁剪功能")])])])]),t._v(" "),i("el-form-item",{attrs:{prop:"content",label:"医院简介"}},[i("Tinymce",{staticClass:"tinymce",attrs:{value:t.submitData.content},on:{"update:value":function(e){t.$set(t.submitData,"content",e)}}})],1)],1),t._v(" "),i("el-button",{staticStyle:{width:"100%",margin:"50px 0"},attrs:{type:"primary",prop:"content"},on:{click:function(e){t.submitHendle("submitData")}}},[t._v("保存")])],1)],1)])])},[],!1,null,"2f05dc58",null);m.options.__file="index.vue";e.default=m.exports},VpLE:function(t,e,i){"use strict";var n={name:"TitleTabs",props:{text:{type:String,required:!1,default:""}}},a=(i("2lAw"),i("KHd+")),o=Object(a.a)(n,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title-container"},[e("span"),this._v("\n  "+this._s(this.text)+"\n")])},[],!1,null,"329ee37a",null);o.options.__file="index.vue";e.a=o.exports},Xme5:function(t,e,i){"use strict";var n=i("e1TD");i.n(n).a},YuTi:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},cpj6:function(t,e,i){"use strict";var n=i("d6BN"),a={components:{vuescroll:i.n(n).a},data:function(){return{ops:{scrollPanel:{},rail:{},bar:{}}}}},o=(i("nU3l"),i("KHd+")),s=Object(o.a)(a,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"phone"},[e("div",{staticClass:"phone-Container"},[e("vuescroll",{attrs:{ops:this.ops}},[e("div",{staticClass:"scroll-coantainer"},[this._t("default")],2)])],1)])])},[],!1,null,"79b59bd4",null);s.options.__file="index.vue";e.a=s.exports},e1TD:function(t,e,i){},"gQ+T":function(t,e,i){"use strict";var n=i("w6Do");i.n(n).a},glbJ:function(t,e,i){"use strict";var n=i("14Xm"),a=i.n(n),o=i("4d7F"),s=i.n(o),r=i("D3Ub"),l=i.n(r),c=i("GQeE"),u=i.n(c),d=i("KTTK"),p=i("eEY5"),f=i.n(p),h={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{qiniuData:{key:"",token:"",config:{},putExtra:{}},dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return u()(this.listObj).every(function(e){return t.listObj[e].hasSuccess})},handleSubmit:function(){var t=this,e=u()(this.listObj).map(function(e){return t.listObj[e]});this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！")},handleSuccess:function(t,e){for(var i=e.uid,n=u()(this.listObj),a=0,o=n.length;a<o;a++)if(this.listObj[n[a]].uid===i)return this.listObj[n[a]].url="https://img.kodin.cn//"+t.key,void(this.listObj[n[a]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,i=u()(this.listObj),n=0,a=i.length;n<a;n++)if(this.listObj[i[n]].uid===e)return void delete this.listObj[i[n]]},beforeUpload:function(t){var e=this;return l()(a.a.mark(function i(){var n,o,r,l;return a.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(d.getQiniuToken)();case 2:return n=i.sent,e.qiniuData.token=n.data.token,e.qiniuData.key=f.a.generate(32)+"."+t.name.split(".").pop(),o=e,r=window.URL||window.webkitURL,l=t.uid,e.listObj[l]={},i.abrupt("return",new s.a(function(e,i){var n=new Image;n.src=r.createObjectURL(t),n.onload=function(){o.listObj[l]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},e(!0)}));case 10:case"end":return i.stop()}},i,e)}))()}}},m=(i("m1gy"),i("KHd+")),v=Object(m.a)(h,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传图片")]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,data:t.qiniuData,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"https://upload.qiniup.com","list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),t._v(" "),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,"27830937",null);v.options.__file="editorImage.vue";var g=v.exports,b=i("mhjD"),_=i.n(b),y=i("6htJ"),w=i.n(y),C={name:"Tinymce",components:{editorImage:g},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return["bold italic strikethrough | emoticons forecolor backcolor | alignleft aligncenter alignright |cut copy paste | undo redo removeformat"]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:Number,required:!1,default:360}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"}}},computed:{language:function(){return this.languageTypeList[this.$store.getters.language]}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(e.tinymceId).setContent(t||"")})},language:function(){var t=this;this.destroyTinymce(),this.$nextTick(function(){return t.initTinymce()})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{initTinymce:function(){var t=this,e=this;window.tinymce.init({language:this.language,selector:"#"+this.tinymceId,height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:w.a,menubar:"",plugins:_.a,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,branding:!1,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("update:value",i.getContent())})},setup:function(t){t.on("FullscreenStateChanged",function(t){e.fullscreen=t.state})}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach(function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'+t.url+'" >')})}}},x=(i("9fVM"),Object(m.a)(C,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:this.fullscreen}},[e("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.tinymceId}}),this._v(" "),e("div",{staticClass:"editor-custom-btn-container"},[e("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:this.imageSuccessCBK}})],1)])},[],!1,null,"6c5bae5e",null));x.options.__file="index.vue";e.a=x.exports},m1gy:function(t,e,i){"use strict";var n=i("9re7");i.n(n).a},mhjD:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"]},nU3l:function(t,e,i){"use strict";var n=i("MbX3");i.n(n).a},rjhV:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getIntro=function(){return(0,n.default)({url:"/api/v1/intro",method:"get"})},e.postIntro=function(t){return(0,n.default)({url:"/api/v1/intro",method:"put",data:t})};var n=function(t){return t&&t.__esModule?t:{default:t}}(i("t3Un"))},tcnC:function(t,e,i){"use strict";var n=i("14Xm"),a=i.n(n),o=i("D3Ub"),s=i.n(o),r=i("fnnb"),l=i("zqLv"),c=i("KTTK"),u=i("eEY5"),d=i.n(u),p=i("S+eF"),f={components:{VueCropper:r.VueCropper},props:{fixedNumber:{type:Array,required:!1,default:function(){return[750,450]}},width:{type:Number,required:!1,default:90},height:{type:Number,required:!1,default:90},deleteSize:{type:Number,required:!1,default:5},value:{type:String,required:!1,default:""},deleteShow:{type:Boolean,required:!1,default:!0}},data:function(){return{dialogVisible:!1,imgFile:"",file:"默认图片",fileList:[],option:{img:"",size:1,outputType:"jpeg",autoCrop:!0,autoCropWidth:250,autoCropHeight:90,fixed:!0,fixedNumber:[750,450],canMove:!1,centerBox:!0}}},computed:{deleteSizeData:function(){return this.deleteSize+"px"},imgUrl:function(t){return this.image}},methods:{qiniuUp:function(t){var e=this;return s()(a.a.mark(function i(){var n,o,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.getQiniuToken)();case 2:return n=e.sent,o=n.data.token,s=l.upload(t.file,d.a.generate(32)+"."+t.file.name.split(".").pop(),o,{},{}),e.abrupt("return",new p.Promise(function(t,e){s.subscribe({next:function(t){},error:function(t){console.log(t),e(t)},complete:function(e){var i="https://img.kodin.cn//"+e.key;t(i)}})}));case 6:case"end":return e.stop()}},i,e)}))()},handleChange:function(t,e){if("ready"===t.status){var i=t.name.split(".");this.option.outputType=i[i.length-1],this.option.img=window.URL.createObjectURL(t.raw),this.dialogVisible=!0}},cropperImg:function(t){var e=this;return s()(a.a.mark(function t(){var i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e,e.$refs.cropper.getCropBlob(function(){var t=s()(a.a.mark(function t(n){var o,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(o={file:n}).file.name="cropperImg."+n.type.split("/").pop(),t.next=4,e.qiniuUp(o);case 4:s=t.sent,i.dialogVisible=!1,i.$emit("update:value",s),i.$emit("change",s);case 8:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t,e)}))()},deleteImg:function(){this.$emit("update:value","")}}},h=(i("5x1B"),i("KHd+")),m=Object(h.a)(f,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{visible:t.dialogVisible,"close-on-click-modal":!1,"append-to-body":!0,title:"图片裁剪",width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"cropperBox"},[i("VueCropper",{ref:"cropper",attrs:{img:t.option.img,"output-size":t.option.size,"output-type":t.option.outputType,"auto-crop":t.option.autoCrop,fixed:t.option.fixed,"fixed-number":t.fixedNumber,"can-move":t.option.canMove,"auto-crop-width":t.option.autoCropWidth,"auto-crop-height":t.option.autoCropHeight,"center-box":t.option.centerBox}})],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.cropperImg()}}},[t._v("裁 剪")])],1)]),t._v(" "),i("div",{staticClass:"uploadBox",style:{width:t.width+"px",height:t.height+"px"}},[""!=t.value&&t.value&&t.deleteShow?i("div",{staticClass:"delete",on:{click:t.deleteImg}},[i("el-button",{style:{padding:t.deleteSizeData},attrs:{type:"danger",icon:"el-icon-delete",circle:""}})],1):t._e(),t._v(" "),i("el-upload",{staticClass:"avatar-uploader",attrs:{"http-request":t.qiniuUp,"show-file-list":!1,multiple:!1,"on-change":t.handleChange,"auto-upload":!1,"file-list":t.fileList,action:""}},[t.value?i("img",{staticClass:"avatar",attrs:{src:t.value,height:t.height+"px"}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon",style:{width:t.width+"px",height:t.height+"px","line-height":t.height+"px"}})])],1)],1)},[],!1,null,"c348c6b4",null);m.options.__file="index.vue";e.a=m.exports},vYwx:function(t,e,i){},w6Do:function(t,e,i){},xJXX:function(t,e,i){},xtIY:function(t,e,i){"use strict";var n={props:{titleName:{type:String,required:!1,default:""}},data:function(){return{}}},a=(i("Xme5"),i("KHd+")),o=Object(a.a)(n,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-row",[e("el-col",{staticClass:"labelContainer"},[e("div",{staticClass:"titlLabel"}),this._v(" "),e("span",[this._v(this._s(this.titleName))])])],1),this._v(" "),e("el-row",[e("el-col",[e("div",{staticClass:"content"},[this._t("default",[this._v("默认值")])],2)])],1)],1)},[],!1,null,"3653119d",null);o.options.__file="index.vue";e.a=o.exports}}]);